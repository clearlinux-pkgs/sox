diff --git a/src/effects_i_dsp.c b/src/effects_i_dsp.c
index a979b50..17c806f 100644
--- a/src/effects_i_dsp.c
+++ b/src/effects_i_dsp.c
@@ -360,6 +360,9 @@ double * lsx_make_lpf(int num_taps, double Fc, double beta, double rho,
   double * h = malloc(num_taps * sizeof(*h)), sum = 0;
   double mult = scale / lsx_bessel_I_0(beta), mult1 = 1 / (.5 * m + rho);
   assert(Fc >= 0 && Fc <= 1);
+
+  if (!h) return NULL;
+
   lsx_debug("make_lpf(n=%i Fc=%.7g β=%g ρ=%g dc-norm=%i scale=%g)", num_taps, Fc, beta, rho, dc_norm, scale);
 
   for (i = 0; i <= m / 2; ++i) {
